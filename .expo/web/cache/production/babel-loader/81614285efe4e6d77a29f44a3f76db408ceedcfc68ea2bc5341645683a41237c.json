{"ast":null,"code":"import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Image from\"react-native-web/dist/exports/Image\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import{useNavigation}from'@react-navigation/native';import axios from'axios';import AsyncStorage from'@react-native-async-storage/async-storage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const screenWidth=Dimensions.get('window').width;const EstadisticasScreen=()=>{const[estadisticas,setEstadisticas]=useState(null);const[loading,setLoading]=useState(true);const navigation=useNavigation();const fetchEstadisticas=async()=>{try{const token=await AsyncStorage.getItem('token');if(!token)throw new Error('No token found');const response=await axios.get('https://prestamos-back-production.up.railway.app/estadisticas/general',{headers:{Authorization:`Bearer ${token}`}});console.log('Datos recibidos:',response.data);setEstadisticas(response.data);}catch(error){console.error('Error al cargar estadísticas:',error.message);console.error('Detalles del error:',error);}finally{setLoading(false);}};useEffect(()=>{fetchEstadisticas();},[]);if(loading){return _jsx(View,{style:styles.container,children:_jsx(ActivityIndicator,{size:\"large\",color:\"#007BFF\"})});}const totalClientes=estadisticas?estadisticas.length:0;const totalPrestamosActivos=estadisticas?estadisticas.filter(item=>item.estado==='pendiente').length:0;const totalPrestamosCompletados=estadisticas?estadisticas.filter(item=>item.estado==='completado').length:0;return _jsxs(View,{style:styles.container,children:[_jsx(Text,{style:styles.title,children:\"Estad\\xEDsticas Generales\"}),_jsxs(View,{style:styles.card,children:[_jsx(Text,{style:styles.cardTitle,children:\"Total Clientes\"}),_jsx(Text,{style:styles.cardValue,children:totalClientes})]}),_jsxs(View,{style:styles.card,children:[_jsx(Text,{style:styles.cardTitle,children:\"Total Pr\\xE9stamos Activos\"}),_jsx(Text,{style:styles.cardValue,children:totalPrestamosActivos})]}),_jsxs(View,{style:styles.card,children:[_jsx(Text,{style:styles.cardTitle,children:\"Total Pr\\xE9stamos Completados\"}),_jsx(Text,{style:styles.cardValue,children:totalPrestamosCompletados})]}),_jsxs(View,{style:styles.buttonContainer,children:[_jsx(TouchableOpacity,{style:styles.button,onPress:()=>navigation.navigate('EstadisticasTablas'),children:_jsx(Image,{source:require('../assets/table_icon.png'),style:styles.icon})}),_jsx(TouchableOpacity,{style:styles.button,onPress:()=>navigation.navigate('EstadisticasGraficas',{estadisticas}),children:_jsx(Image,{source:require('../assets/chart_icon.png'),style:styles.icon})})]})]});};const styles=StyleSheet.create({container:{flex:1,padding:16,backgroundColor:'#fff'},title:{fontSize:24,fontWeight:'bold',marginBottom:16,textAlign:'center'},card:{backgroundColor:'#f8f9fa',borderRadius:8,padding:16,marginVertical:8},cardTitle:{fontSize:18,fontWeight:'bold'},cardValue:{fontSize:16},buttonContainer:{flexDirection:'row',justifyContent:'space-around',marginTop:16},button:{width:150,height:150,justifyContent:'center',alignItems:'center',borderRadius:8,backgroundColor:'#007BFF',padding:16},icon:{width:'100%',height:'100%',resizeMode:'contain'}});export default EstadisticasScreen;","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","TouchableOpacity","Image","Dimensions","ActivityIndicator","useNavigation","axios","AsyncStorage","jsx","_jsx","jsxs","_jsxs","screenWidth","get","width","EstadisticasScreen","estadisticas","setEstadisticas","loading","setLoading","navigation","fetchEstadisticas","token","getItem","Error","response","headers","Authorization","console","log","data","error","message","style","styles","container","children","size","color","totalClientes","length","totalPrestamosActivos","filter","item","estado","totalPrestamosCompletados","title","card","cardTitle","cardValue","buttonContainer","button","onPress","navigate","source","require","icon","create","flex","padding","backgroundColor","fontSize","fontWeight","marginBottom","textAlign","borderRadius","marginVertical","flexDirection","justifyContent","marginTop","height","alignItems","resizeMode"],"sources":["C:/prestamos/prestamos-front/screens/Estadisticas.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Image, Dimensions, ActivityIndicator } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst screenWidth = Dimensions.get('window').width;\n\nconst EstadisticasScreen = () => {\n    const [estadisticas, setEstadisticas] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const navigation = useNavigation();\n\n    const fetchEstadisticas = async () => {\n        try {\n            const token = await AsyncStorage.getItem('token');\n            if (!token) throw new Error('No token found');\n            \n            const response = await axios.get('https://prestamos-back-production.up.railway.app/estadisticas/general', {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n\n            console.log('Datos recibidos:', response.data);\n            setEstadisticas(response.data);\n        } catch (error) {\n            console.error('Error al cargar estadísticas:', error.message);\n            console.error('Detalles del error:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchEstadisticas();\n    }, []);\n\n    if (loading) {\n        return (\n            <View style={styles.container}>\n                <ActivityIndicator size=\"large\" color=\"#007BFF\" />\n            </View>\n        );\n    }\n\n    const totalClientes = estadisticas ? estadisticas.length : 0;\n    const totalPrestamosActivos = estadisticas ? estadisticas.filter(item => item.estado === 'pendiente').length : 0;\n    const totalPrestamosCompletados = estadisticas ? estadisticas.filter(item => item.estado === 'completado').length : 0;\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.title}>Estadísticas Generales</Text>\n            <View style={styles.card}>\n                <Text style={styles.cardTitle}>Total Clientes</Text>\n                <Text style={styles.cardValue}>{totalClientes}</Text>\n            </View>\n            <View style={styles.card}>\n                <Text style={styles.cardTitle}>Total Préstamos Activos</Text>\n                <Text style={styles.cardValue}>{totalPrestamosActivos}</Text>\n            </View>\n            <View style={styles.card}>\n                <Text style={styles.cardTitle}>Total Préstamos Completados</Text>\n                <Text style={styles.cardValue}>{totalPrestamosCompletados}</Text>\n            </View>\n            <View style={styles.buttonContainer}>\n                <TouchableOpacity style={styles.button} onPress={() => navigation.navigate('EstadisticasTablas')}>\n                    <Image source={require('../assets/table_icon.png')} style={styles.icon} />\n                </TouchableOpacity>\n                <TouchableOpacity style={styles.button} onPress={() => navigation.navigate('EstadisticasGraficas', { estadisticas })}>\n                    <Image source={require('../assets/chart_icon.png')} style={styles.icon} />\n                </TouchableOpacity>\n            </View>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: { flex: 1, padding: 16, backgroundColor: '#fff' },\n    title: { fontSize: 24, fontWeight: 'bold', marginBottom: 16, textAlign: 'center' },\n    card: { backgroundColor: '#f8f9fa', borderRadius: 8, padding: 16, marginVertical: 8 },\n    cardTitle: { fontSize: 18, fontWeight: 'bold' },\n    cardValue: { fontSize: 16 },\n    buttonContainer: { flexDirection: 'row', justifyContent: 'space-around', marginTop: 16 },\n    button: { width: 150, height: 150, justifyContent: 'center', alignItems: 'center', borderRadius: 8, backgroundColor: '#007BFF', padding: 16 },\n    icon: { width: '100%', height: '100%', resizeMode: 'contain' }\n});\n\nexport default EstadisticasScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}