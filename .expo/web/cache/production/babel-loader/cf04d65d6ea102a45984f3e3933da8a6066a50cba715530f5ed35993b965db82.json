{"ast":null,"code":"import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Button from\"react-native-web/dist/exports/Button\";import axios from'axios';import ClienteCard from'../components/ClienteCard';import AsyncStorage from'@react-native-async-storage/async-storage';import EditarClientes from'../components/EditarClientes';import EliminarClientes from'../components/EliminarClientes';import*as XLSX from'xlsx';import*as FileSystem from'expo-file-system';import*as Sharing from'expo-sharing';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TrabajadorClientes=({route,navigation})=>{const{id,clienteActualizado,isFromEdit}=route.params||{};const[clientes,setClientes]=useState([]);const[searchText,setSearchText]=useState('');const[filteredClientes,setFilteredClientes]=useState([]);const[isAdmin,setIsAdmin]=useState(false);const[clienteSeleccionado,setClienteSeleccionado]=useState(null);const[modalVisible,setModalVisible]=useState(false);const[eliminarVisible,setEliminarVisible]=useState(false);const decodeToken=token=>{const base64Url=token.split('.')[1];const base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');const jsonPayload=decodeURIComponent(atob(base64).split('').map(c=>{return'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));return JSON.parse(jsonPayload);};useEffect(()=>{const fetchClientes=async()=>{try{const token=await AsyncStorage.getItem('token');if(!token){throw new Error('No se encontró el token');}const decodedToken=decodeToken(token);setIsAdmin(decodedToken.role==='admin');const response=await axios.get(`https://prestamos-back-production.up.railway.app/trabajadores/${id}/clientes`,{headers:{Authorization:`Bearer ${token}`}});setClientes(response.data);setFilteredClientes(response.data);}catch(error){console.error(error);}};fetchClientes();},[id]);useEffect(()=>{if(isFromEdit&&clienteActualizado){const updatedClientes=clientes.map(cliente=>cliente.id===clienteActualizado.id?clienteActualizado:cliente);setClientes(updatedClientes);setFilteredClientes(updatedClientes);}},[clienteActualizado,isFromEdit]);const handleSearch=text=>{setSearchText(text);if(text===''){setFilteredClientes(clientes);}else{const filtered=clientes.filter(cliente=>cliente.nombre.toLowerCase().includes(text.toLowerCase()));setFilteredClientes(filtered);}};const handleEdit=cliente=>{setClienteSeleccionado(cliente);setModalVisible(true);};const handleDelete=cliente=>{setClienteSeleccionado(cliente);setEliminarVisible(true);};const handleEliminar=async clienteId=>{if(!clienteId){setEliminarVisible(false);return;}try{const token=await AsyncStorage.getItem('token');if(!token){throw new Error('No se encontró el token');}await axios.delete(`https://prestamos-back-production.up.railway.app/clientes/${clienteId}`,{headers:{Authorization:`Bearer ${token}`}});const updatedClientes=clientes.filter(cliente=>cliente.id!==clienteId);setClientes(updatedClientes);setFilteredClientes(updatedClientes);}catch(error){console.error(error);}finally{setEliminarVisible(false);}};const handleGuardar=clienteActualizado=>{const updatedClientes=clientes.map(cliente=>cliente.id===clienteActualizado.id?clienteActualizado:cliente);setClientes(updatedClientes);setFilteredClientes(updatedClientes);setModalVisible(false);};const handleExport=async cliente=>{try{const token=await AsyncStorage.getItem('token');if(!token){throw new Error('No se encontró el token');}const response=await axios.get(`https://prestamos-back-production.up.railway.app/estadisticas/cliente/${cliente.id}`,{headers:{Authorization:`Bearer ${token}`}});const data=response.data;const formattedData=[{'No.':1,'Nombre':data.nombre,'Direccion':data.direccion,'Telefono':data.telefono,'Monto':data.monto_inicial,'Esquema de Dias-%':`${data.dias_prestamo===15?`15 días $85x1000 30%`:data.dias_prestamo===20?`20 días $65x1000 30%`:data.esquema_dias}`,'Fecha de inicio del prestamo':new Date(data.fecha_inicio).toLocaleDateString('es-ES',{day:'2-digit',month:'long',year:'numeric'}),'Fecha de termino':new Date(data.fecha_termino).toLocaleDateString('es-ES',{day:'2-digit',month:'long',year:'numeric'}),'Observaciones':data.ocupacion}];const ws=XLSX.utils.json_to_sheet(formattedData);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Estadísticas\");const fileName=`estadisticas_cliente_${cliente.nombre.replace(/ /g,'_')}.xlsx`;const wbout=XLSX.write(wb,{type:'binary',bookType:\"xlsx\"});const s2ab=s=>{const buf=new ArrayBuffer(s.length);const view=new Uint8Array(buf);for(let i=0;i!==s.length;++i){view[i]=s.charCodeAt(i)&0xFF;}return buf;};const bufferToBase64=buffer=>{let binary='';const bytes=new Uint8Array(buffer);const len=bytes.byteLength;for(let i=0;i<len;i++){binary+=String.fromCharCode(bytes[i]);}return btoa(binary);};const uri=FileSystem.cacheDirectory+fileName;await FileSystem.writeAsStringAsync(uri,bufferToBase64(s2ab(wbout)),{encoding:FileSystem.EncodingType.Base64});if(await Sharing.isAvailableAsync()){await Sharing.shareAsync(uri);}else{console.log(\"Sharing is not available on this platform.\");}}catch(error){console.error('Error exportando estadísticas:',error);}};return _jsxs(ScrollView,{contentContainerStyle:styles.container,children:[_jsx(Text,{style:styles.title,children:\"Lista de clientes\"}),_jsx(TextInput,{style:styles.searchInput,placeholder:\"Buscar por nombre\",value:searchText,onChangeText:handleSearch}),_jsx(FlatList,{data:filteredClientes,keyExtractor:item=>item.id.toString(),renderItem:({item})=>_jsx(ClienteCard,{cliente:item,onPress:()=>navigation.navigate('ClienteDetails',{id:item.id}),isAdmin:isAdmin,onEdit:()=>handleEdit(item),onDelete:handleDelete,onExport:()=>handleExport(item)})}),clienteSeleccionado&&_jsx(EditarClientes,{cliente:clienteSeleccionado,visible:modalVisible,onClose:()=>setModalVisible(false),onGuardar:handleGuardar}),clienteSeleccionado&&_jsx(EliminarClientes,{cliente:clienteSeleccionado,visible:eliminarVisible,onClose:()=>setEliminarVisible(false),onEliminar:handleEliminar})]});};const styles=StyleSheet.create({container:{flex:1,backgroundColor:'#1e1e1e',padding:10},title:{fontSize:24,color:'#fff',marginBottom:20,textAlign:'center'},searchInput:{backgroundColor:'#fff',color:'#000',padding:10,borderRadius:8,marginBottom:20}});export default TrabajadorClientes;","map":{"version":3,"names":["React","useState","useEffect","View","FlatList","Text","TextInput","StyleSheet","ScrollView","Button","axios","ClienteCard","AsyncStorage","EditarClientes","EliminarClientes","XLSX","FileSystem","Sharing","jsx","_jsx","jsxs","_jsxs","TrabajadorClientes","route","navigation","id","clienteActualizado","isFromEdit","params","clientes","setClientes","searchText","setSearchText","filteredClientes","setFilteredClientes","isAdmin","setIsAdmin","clienteSeleccionado","setClienteSeleccionado","modalVisible","setModalVisible","eliminarVisible","setEliminarVisible","decodeToken","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","fetchClientes","getItem","Error","decodedToken","role","response","get","headers","Authorization","data","error","console","updatedClientes","cliente","handleSearch","text","filtered","filter","nombre","toLowerCase","includes","handleEdit","handleDelete","handleEliminar","clienteId","delete","handleGuardar","handleExport","formattedData","direccion","telefono","monto_inicial","dias_prestamo","esquema_dias","Date","fecha_inicio","toLocaleDateString","day","month","year","fecha_termino","ocupacion","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","fileName","wbout","write","type","bookType","s2ab","s","buf","ArrayBuffer","length","view","Uint8Array","i","bufferToBase64","buffer","binary","bytes","len","byteLength","String","fromCharCode","btoa","uri","cacheDirectory","writeAsStringAsync","encoding","EncodingType","Base64","isAvailableAsync","shareAsync","log","contentContainerStyle","styles","container","children","style","title","searchInput","placeholder","value","onChangeText","keyExtractor","item","renderItem","onPress","navigate","onEdit","onDelete","onExport","visible","onClose","onGuardar","onEliminar","create","flex","backgroundColor","padding","fontSize","color","marginBottom","textAlign","borderRadius"],"sources":["C:/prestamos/prestamos-front/screens/TrabajadorClientes.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, FlatList, Text, TextInput, StyleSheet, ScrollView, Button } from 'react-native';\nimport axios from 'axios';\nimport ClienteCard from '../components/ClienteCard';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport EditarClientes from '../components/EditarClientes';\nimport EliminarClientes from '../components/EliminarClientes';\nimport * as XLSX from 'xlsx';\nimport * as FileSystem from 'expo-file-system';\nimport * as Sharing from 'expo-sharing';\n\nconst TrabajadorClientes = ({ route, navigation }) => {\n    const { id, clienteActualizado, isFromEdit } = route.params || {};\n    const [clientes, setClientes] = useState([]);\n    const [searchText, setSearchText] = useState('');\n    const [filteredClientes, setFilteredClientes] = useState([]);\n    const [isAdmin, setIsAdmin] = useState(false);\n    const [clienteSeleccionado, setClienteSeleccionado] = useState(null);\n    const [modalVisible, setModalVisible] = useState(false);\n    const [eliminarVisible, setEliminarVisible] = useState(false);\n\n    const decodeToken = (token) => {\n        const base64Url = token.split('.')[1];\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonPayload = decodeURIComponent(atob(base64).split('').map((c) => {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n\n        return JSON.parse(jsonPayload);\n    };\n\n    useEffect(() => {\n        const fetchClientes = async () => {\n            try {\n                const token = await AsyncStorage.getItem('token');\n\n                if (!token) {\n                    throw new Error('No se encontró el token');\n                }\n\n                const decodedToken = decodeToken(token);\n                setIsAdmin(decodedToken.role === 'admin');\n\n                const response = await axios.get(`https://prestamos-back-production.up.railway.app/trabajadores/${id}/clientes`, {\n                    headers: { Authorization: `Bearer ${token}` }\n                });\n\n                setClientes(response.data);\n                setFilteredClientes(response.data);\n            } catch (error) {\n                console.error(error);\n            }\n        };\n\n        fetchClientes();\n    }, [id]);\n\n    useEffect(() => {\n        if (isFromEdit && clienteActualizado) {\n            const updatedClientes = clientes.map((cliente) =>\n                cliente.id === clienteActualizado.id ? clienteActualizado : cliente\n            );\n            setClientes(updatedClientes);\n            setFilteredClientes(updatedClientes);\n        }\n    }, [clienteActualizado, isFromEdit]);\n\n    const handleSearch = (text) => {\n        setSearchText(text);\n        if (text === '') {\n            setFilteredClientes(clientes);\n        } else {\n            const filtered = clientes.filter(cliente =>\n                cliente.nombre.toLowerCase().includes(text.toLowerCase())\n            );\n            setFilteredClientes(filtered);\n        }\n    };\n\n    const handleEdit = (cliente) => {\n        setClienteSeleccionado(cliente);\n        setModalVisible(true);\n    };\n\n    const handleDelete = (cliente) => {\n        setClienteSeleccionado(cliente);\n        setEliminarVisible(true);\n    };\n\n    const handleEliminar = async (clienteId) => {\n        if (!clienteId) {\n            setEliminarVisible(false);\n            return;\n        }\n        \n        try {\n            const token = await AsyncStorage.getItem('token');\n\n            if (!token) {\n                throw new Error('No se encontró el token');\n            }\n\n            await axios.delete(`https://prestamos-back-production.up.railway.app/clientes/${clienteId}`, {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n\n            const updatedClientes = clientes.filter(cliente => cliente.id !== clienteId);\n            setClientes(updatedClientes);\n            setFilteredClientes(updatedClientes);\n        } catch (error) {\n            console.error(error);\n        } finally {\n            setEliminarVisible(false);\n        }\n    };\n\n    const handleGuardar = (clienteActualizado) => {\n        const updatedClientes = clientes.map((cliente) =>\n            cliente.id === clienteActualizado.id ? clienteActualizado : cliente\n        );\n        setClientes(updatedClientes);\n        setFilteredClientes(updatedClientes);\n        setModalVisible(false);\n    };\n\n    const handleExport = async (cliente) => {\n        try {\n            const token = await AsyncStorage.getItem('token');\n            if (!token) {\n                throw new Error('No se encontró el token');\n            }\n    \n            // Obtener datos del cliente\n            const response = await axios.get(`https://prestamos-back-production.up.railway.app/estadisticas/cliente/${cliente.id}`, {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n    \n            const data = response.data;\n    \n            // Formatear los datos para el archivo Excel\n            const formattedData = [{\n                'No.': 1,  // Si es un solo cliente, el número es fijo.\n                'Nombre': data.nombre,\n                'Direccion': data.direccion,\n                'Telefono': data.telefono,\n                'Monto': data.monto_inicial,\n                'Esquema de Dias-%': `${data.dias_prestamo === 15 ? `15 días $85x1000 30%` : data.dias_prestamo === 20 ? `20 días $65x1000 30%` : data.esquema_dias}`,\n                'Fecha de inicio del prestamo': new Date(data.fecha_inicio).toLocaleDateString('es-ES', {\n                    day: '2-digit', month: 'long', year: 'numeric'\n                }),\n                'Fecha de termino': new Date(data.fecha_termino).toLocaleDateString('es-ES', {\n                    day: '2-digit', month: 'long', year: 'numeric'\n                }),\n                'Observaciones': data.ocupacion\n            }];\n    \n            const ws = XLSX.utils.json_to_sheet(formattedData);\n            const wb = XLSX.utils.book_new();\n            XLSX.utils.book_append_sheet(wb, ws, \"Estadísticas\");\n    \n            // Crear el nombre del archivo con el nombre del cliente\n            const fileName = `estadisticas_cliente_${cliente.nombre.replace(/ /g, '_')}.xlsx`;\n    \n            const wbout = XLSX.write(wb, { type: 'binary', bookType: \"xlsx\" });\n    \n            const s2ab = (s) => {\n                const buf = new ArrayBuffer(s.length);\n                const view = new Uint8Array(buf);\n                for (let i = 0; i !== s.length; ++i) {\n                    view[i] = s.charCodeAt(i) & 0xFF;\n                }\n                return buf;\n            };\n    \n            const bufferToBase64 = (buffer) => {\n                let binary = '';\n                const bytes = new Uint8Array(buffer);\n                const len = bytes.byteLength;\n                for (let i = 0; i < len; i++) {\n                    binary += String.fromCharCode(bytes[i]);\n                }\n                return btoa(binary);\n            };\n    \n            const uri = FileSystem.cacheDirectory + fileName;\n            await FileSystem.writeAsStringAsync(uri, bufferToBase64(s2ab(wbout)), { encoding: FileSystem.EncodingType.Base64 });\n    \n            if (await Sharing.isAvailableAsync()) {\n                await Sharing.shareAsync(uri);\n            } else {\n                console.log(\"Sharing is not available on this platform.\");\n            }\n        } catch (error) {\n            console.error('Error exportando estadísticas:', error);\n        }\n    };\n    \n    \n    \n\n    return (\n        <ScrollView contentContainerStyle={styles.container}>\n            <Text style={styles.title}>Lista de clientes</Text>\n            <TextInput\n                style={styles.searchInput}\n                placeholder=\"Buscar por nombre\"\n                value={searchText}\n                onChangeText={handleSearch}\n            />\n            <FlatList\n                data={filteredClientes}\n                keyExtractor={item => item.id.toString()}\n                renderItem={({ item }) => (\n                    <ClienteCard \n                        cliente={item} \n                        onPress={() => navigation.navigate('ClienteDetails', { id: item.id })} \n                        isAdmin={isAdmin} \n                        onEdit={() => handleEdit(item)}\n                        onDelete={handleDelete}\n                        onExport={() => handleExport(item)}\n                    />\n                )}\n            />\n            {clienteSeleccionado && (\n                <EditarClientes\n                    cliente={clienteSeleccionado}\n                    visible={modalVisible}\n                    onClose={() => setModalVisible(false)}\n                    onGuardar={handleGuardar}\n                />\n            )}\n            {clienteSeleccionado && (\n                <EliminarClientes\n                    cliente={clienteSeleccionado}\n                    visible={eliminarVisible}\n                    onClose={() => setEliminarVisible(false)}\n                    onEliminar={handleEliminar}\n                />\n            )}\n        </ScrollView>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: '#1e1e1e', // Fondo oscuro\n        padding: 10,\n    },\n    title: {\n        fontSize: 24,\n        color: '#fff', // Texto blanco\n        marginBottom: 20,\n        textAlign: 'center',\n    },\n    searchInput: {\n        backgroundColor: '#fff', // Fondo del input oscuro\n        color: '#000', // Texto blanco\n        padding: 10,\n        borderRadius: 8,\n        marginBottom: 20,\n    },\n});\n\nexport default TrabajadorClientes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}