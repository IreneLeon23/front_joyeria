{"ast":null,"code":"import React,{useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import axios from'axios';import AsyncStorage from'@react-native-async-storage/async-storage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AbonoForm=({clienteId,onAddAbono})=>{const[monto,setMonto]=useState('');const[loading,setLoading]=useState(false);const handleAddAbono=async()=>{if(loading)return;try{setLoading(true);const token=await AsyncStorage.getItem('token');if(!token){console.error('No token found');setLoading(false);return;}const fecha=new Date().toISOString().split('T')[0];const response=await axios.post(`https://prestamos-back-production.up.railway.app/clientes/${clienteId}/abonos`,{monto:parseFloat(monto),fecha},{headers:{Authorization:`Bearer ${token}`}});if(response.status===201){console.log('Abono added successfully:',response.data);onAddAbono();setMonto('');}else{console.error('Error al agregar abono:',response.data);}}catch(error){console.error('Error en la solicitud de agregar abono:',error);}finally{setLoading(false);}};return _jsxs(View,{style:styles.container,children:[_jsx(Text,{style:styles.label,children:\"Agregar monto:\"}),_jsx(TextInput,{style:styles.input,value:monto,onChangeText:text=>setMonto(text.replace(/[^0-9.]/g,'')),keyboardType:\"numeric\"}),_jsx(Button,{title:\"Abonar\",onPress:handleAddAbono,disabled:loading})]});};const styles=StyleSheet.create({container:{marginBottom:20},label:{fontSize:16,fontWeight:'bold',marginBottom:16},input:{height:40,borderColor:'gray',borderWidth:1,paddingHorizontal:10,marginBottom:10}});export default AbonoForm;","map":{"version":3,"names":["React","useState","View","Text","TextInput","Button","StyleSheet","axios","AsyncStorage","jsx","_jsx","jsxs","_jsxs","AbonoForm","clienteId","onAddAbono","monto","setMonto","loading","setLoading","handleAddAbono","token","getItem","console","error","fecha","Date","toISOString","split","response","post","parseFloat","headers","Authorization","status","log","data","style","styles","container","children","label","input","value","onChangeText","text","replace","keyboardType","title","onPress","disabled","create","marginBottom","fontSize","fontWeight","height","borderColor","borderWidth","paddingHorizontal"],"sources":["C:/prestamos/prestamos-front/components/AbonoForm.jsx"],"sourcesContent":["    import React, { useState } from 'react';\n    import { View, Text, TextInput, Button, StyleSheet } from 'react-native';\n    import axios from 'axios';\n    import AsyncStorage from '@react-native-async-storage/async-storage';\n\n    const AbonoForm = ({ clienteId, onAddAbono }) => {\n        const [monto, setMonto] = useState('');\n        const [loading, setLoading] = useState(false);\n\n        const handleAddAbono = async () => {\n            if (loading) return;  // Evita solicitudes múltiples\n\n            try {\n                setLoading(true);\n                const token = await AsyncStorage.getItem('token');\n                if (!token) {\n                    console.error('No token found');\n                    setLoading(false);\n                    return;\n                }\n\n                const fecha = new Date().toISOString().split('T')[0]; // Fecha actual en formato YYYY-MM-DD\n\n                const response = await axios.post(`https://prestamos-back-production.up.railway.app/clientes/${clienteId}/abonos`, { monto: parseFloat(monto), fecha }, {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                });\n\n                if (response.status === 201) {\n                    console.log('Abono added successfully:', response.data);\n                    onAddAbono();\n                    setMonto('');\n                } else {\n                    console.error('Error al agregar abono:', response.data);\n                }\n            } catch (error) {\n                console.error('Error en la solicitud de agregar abono:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        return (\n            <View style={styles.container}>\n                <Text style={styles.label}>Agregar monto:</Text>\n                <TextInput\n                    style={styles.input}\n                    value={monto}\n                    onChangeText={text => setMonto(text.replace(/[^0-9.]/g, ''))}  // Permitir solo números y punto decimal\n                    keyboardType=\"numeric\"\n                />\n                <Button title=\"Abonar\" onPress={handleAddAbono} disabled={loading} />\n            </View>\n        );\n    };\n\n    const styles = StyleSheet.create({\n        container: {\n            marginBottom: 20,\n        },\n        label: {\n            fontSize: 16,\n            fontWeight: 'bold',\n            marginBottom: 16,\n        },\n        input: {\n            height: 40,\n            borderColor: 'gray',\n            borderWidth: 1,\n            paddingHorizontal: 10,\n            marginBottom: 10,\n        },\n    });\n\n    export default AbonoForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}